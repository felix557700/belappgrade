<menu>
    <div class="container {active: isMenuActive, hide: isArrowRotated}">
        <p class="main-text" if="{!isMenuActive}">
            Our mission is to promote entrepreneurship, innovation and creativity in Belgrade
        </p>

        <p class="choose-text" if="{!isMenuActive}">
            Choose between different categories: Startups or Culture
        </p>

        <div class="icon-group">
            <div class="icon icon-bulb {orange: isCompanySelected}" onclick="{selectCompanies}"></div>
            <div class="icon icon-mask {orange: isCultureSelected}" onclick="{selectCulture}"></div>
        </div>

        <company-links show="{isCompanySelected}"></company-links>
        <culture-links show="{isCultureSelected}"></culture-links>

        <!--TODO only show arrow when at least one item is selected !!! -->
        <div class="arrow {active: isArrowRotated}" onclick="{rotateArrow}" if="{isMenuActive}">
            <i class="fa fa-chevron-up"></i>
        </div>

        <span class="arrow-text {active: isArrowRotated}">{selectedLink}</span>
    </div>


    <script>
        import RiotControl from 'RiotControl'

        const tag = this

        tag.isMenuActive = false

        tag.on('mount', function () {
            RiotControl.on('startup:show', _ => tag.handleLinkClick('startups'))
            RiotControl.on('cooperation:show', _ => tag.handleLinkClick('cooperation'))
        })

        tag.selectCompanies = function() {
            tag.isMenuActive = true
            tag.isCompanySelected = true
            tag.isCultureSelected = false
            tag.isCvTemplate = false

            zenscroll.center(document.getElementById("map"))
            RiotControl.trigger('zoom:enable')
        }

        tag.selectCulture = function() {
            tag.isMenuActive = true
            tag.isCompanySelected = false
            tag.isCultureSelected = true
            tag.isCvTemplate = false

            zenscroll.center(document.getElementById("map"))
            RiotControl.trigger('zoom:enable')
        }

        tag.closeMenu = function () {
            tag.isMenuClosed = !tag.isMenuClosed
        }

        tag.rotateArrow = function () {
            tag.isArrowRotated = !tag.isArrowRotated
        }

        tag.handleLinkClick = function (linkText) {
            tag.selectedLink = linkText
        }

        tag.on('unmount', function () {
            RiotControl.off('startup:show')
            RiotControl.off('cooperation:show')
        })

    </script>

</menu>
